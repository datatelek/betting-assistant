# AI-ассистент беттора

> Вводишь матч — получаешь полный аналитический разбор: последние 5 матчей, ход игр, уверенность команд, травмы, новости, цитаты тренеров.

## Что умеет

- **Текстовый ввод**: напиши `Manchester City vs Arsenal` — ассистент сам найдёт всё нужное
- **Скриншот из букмекерской**: загрузи картинку из 1xBet, Betway, Фонбет и т.д. — GPT-4o распознает команды
- **Агентный подход**: GPT-4o сам решает, что и в каком порядке искать (последние матчи + новости для обеих команд)
- **Веб-поиск**: использует Serper API (Google) или DuckDuckGo как fallback
- **Вывод на русском**: структурированный markdown-отчёт с оценкой формы (1-10)

## Что выдаёт на выходе

```
## Манчестер Сити
### Последние 5 матчей
- Манчестер Сити 3-1 Челси (уверенная победа, доминирование)
- Арсенал 1-2 Манчестер Сити (...)
...
**Форма: 8/10** — команда на подъёме

### Новости
- Холанд вернулся к тренировкам после травмы
- Гвардиола: "Мы готовы к любому сопернику"
...
```

## Быстрый старт

### 1. Клонировать репозиторий
```bash
git clone https://github.com/datatelek/betting-assistant.git
cd betting-assistant
```

### 2. Установить зависимости
```bash
pip install -r requirements.txt
```

### 3. Настроить переменные окружения
```bash
cp .env.example .env
# Открыть .env и вставить ключи
```

### 4. Запустить
```bash
python app.py
```
Открыть в браузере: http://localhost:7860

## API-ключи

| Ключ | Обязательный | Где взять |
|------|-------------|----------|
| `OPENAI_API_KEY` | Да | [platform.openai.com](https://platform.openai.com/api-keys) |
| `SERPER_API_KEY` | Нет (рекомендуется) | [serper.dev](https://serper.dev) — 2500 запросов/мес бесплатно |

Без `SERPER_API_KEY` приложение работает через DuckDuckGo, но качество поиска хуже.

## Стек

- **LLM**: GPT-4o (агентный цикл + vision для скриншотов)
- **UI**: Gradio
- **Поиск**: Serper API / DuckDuckGo
- **HTTP**: httpx
- **Изображения**: Pillow

## Архитектура

```
Пользователь
    |
    v
Gradio UI
    |
    +--> [текст] parse_match() --> run_agent()
    +--> [скриншот] GPT-4o vision --> extract_teams() --> run_agent()
                                              |
                                              v
                                    Агентный цикл GPT-4o
                                    (tool_calls loop)
                                        |
                            +-----------+-----------+
                            |                       |
                    search_team_matches()   search_team_news()
                            |                       |
                    web_search() [Serper/DDG]
                            |
                            v
                    Финальный отчёт на русском
```

## Расширение

Легко добавить дополнительные инструменты в список `TOOLS`:
- `get_head_to_head` — история личных встреч
- `get_odds_movement` — динамика коэффициентов
- `get_weather` — погода на матч
- `search_sofascore` — детальная статистика xG, удары
